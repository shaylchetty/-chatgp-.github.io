<!DOCTYPE html>
<html>
<font size="+2">
  <head>
	  <img src=https://cdn1.epicgames.com/salesEvent/salesEvent/EGS_GenshinImpact_miHoYoLimited_S1_2560x1440-91c6cd7312cc2647c3ebccca10f30399
      width="1200" 
      height="600"
      
      />
	  
    <title>Deep Learning Models Stochastic Processes</title>
  </head>
  <body>
    <header>
      <h1>Data Science Hackathon Project</h1>
    </header>

    <nav>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#problem-statement">Problem Statement</a></li>
        <li><a href="#methodology">Methodology</a></li>
        <li><a href="#graphs">Graphs</a></li>
	<li><a href="#neural_networks">Neural Networks</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
	<li><a href="#members">Members</a></li>
      </ul>
    </nav>

    <main>
      <section id="introduction">
        <h2>Introduction</h2>
        <p>Genshin Impact (henceforth Genshin) is a RPG (role-playing game) set in a fantastical universe. The player controls a party of 4 adventurers/characters (who they can swap out) and complete quests. Each character can be armed with weapons, and each has a different rank (1 star = common to 5 star = super rare), design aesthetics, and abilities. 
</p>

	<p>Players open up ‘loot boxes’ to obtain characters to play as and weapons to use and progress the story. There are many loot boxes, and these all contain a ‘featured prize’ – a unique 5-star prize that is unique to a particular loot box – which players are often trying to get. The probability of getting characters and weapons are given below (please see this for a full list of rules, but they are not necessary for our limited challenge):
 
</p>

	<img src=https://lh3.googleusercontent.com/KSV9fdm8CUXgC8l5FzV4kAkzseZO8IEif7cRFLVg1zMGdis4gV-oC127Trs5ofu5TO793kgYHB5Xf-jtbZ81fIN_JJsDV1OPNnyAHa4UXnSDZ378kUejp7tnw8omMY7jJ0HRBU7hsg=w2400 />

	<p>In order to protect users from overspending, the video game company (Mihoyo) implemented a protection mechanism where:
 
</p>

	<ol>
        <li>If the player doesn’t get a 5-star after opening 90 of the same boxes, the game will gift the player a 5-star character. (coded as pityCount under wishes.csv)
</li>
        <li>If the player doesn’t get a 4-star after opening 10 of the same boxes, the game will gift the player a 4-star character. (coded as rarePity under wishes.csv)
</li>

      </ol>
      
      
      <p>However, rumors are spreading that there are even more mechanisms in place in this lottery. Your goal as a data scientist is to identify if that is really the case, and in the process, find out other anomalies in the data which points to non-disclosed features of the lottery system.
 
</p>
	
      </section>

      <section id="problem-statement">
        <h2>Problem Statement</h2>
        <p>However, rumors are spreading that there are even more mechanisms in place in this lottery. Your goal as a data scientist is to identify if that is really the case, and in the process, find out other anomalies in the data which points to non-disclosed features of the lottery system.
 
</p>
      </section>

      <section id="methodology">
        <h2>Methodology</h2>
    <p> 1. Cleaned data to allow for accurate graphing <br/><br/> 2. Created visuals for subsets of the data to search for obvious trends <br/><br/> 3. Applied linear regression on these graphs <br/><br/>4. Created neural network to predict probability distribution of obtaining a rare or legendary item<br/><br/>5. Used interpretability analysis on the results of the neural networks to find how individual factors affected probability </p>
      </section>

      <section id="graphs">
        <h2>Graphs</h2>
	      
	      <p> For the purpose of this experiment, we define pity as the number of boxes left to open before a rare/legendary item is guaranteed </p>
       
	      
	      
	<p>Distribution of Pity Counts</p>
	      
	<img src=https://lh3.googleusercontent.com/quLkTv4TLfy4mAUEz-KXggL-DYFLM5rkoWJayclQtadlZ-qIDyNaZUKkCc1kxIt4CiiY5tNSY9bKPPckT4zwy0tXXns1oPzMLFe2ZbpuYoPubyfUjSMxtOgObbAZO8vT7NT3zcFXXQ=w2400 />
	      
	 
	 <p> As demonstrated by the plot above, the distribution of pity counts in relation to when legendary and rare items were obtained does not comply to the expected geometric distribution, thus we concluded there must be other factors at play. In the plots below, we attempt to elucidate this by visualizing comparisons between several factors. </p>
	      
	      
	     <p><b>Composite</b> Boxes openefore before Legendary obtained and Rare obtained</p>
	      
	      
	<img src=https://lh3.googleusercontent.com/FSwALaKa3FOMT9D-RjDsMuHoaNDVVwcsEdyomQzZqFNN1EGwDd2rDZXeNVMH7mFth1TNHyO1K_dYU91-BVee9h-B_OjEoKrP-pm_x8EX7BcGPwYZNKXrAs18uUhVJ4p19EIFLdEtKg=w2400 />     
	 
	      <p> The above two plots further reinforce the notion that the pity mechanism is not merely geometric; they peak just before the maximum pity value, which goes against the expected peak at the right end (since it represents the cumulative of the right tailed geometric distribution). </p>
	      
	
	<p> Boxes opened before Legendary obtained and Rare obtained (excluding guarantees - i.e. when the pity reached 0)</p>
	      
	      
	<img src=https://lh3.googleusercontent.com/jbtQqWcVT5i7mEYfIn5RAjKtYjAcBRN1bIUGW-5yx8OHJ1yBbgquoCdcySm8x7C5AL91O4K9vRiSaHuyhlK9luVjYDKgubqowPrtfnBgKSDkUxj66jxaYd1AsBiOXuqRL18eMra9LQ=w2400 />
	 
	      
	     <p> After removing the guarantees, we would expect the distribution to be geometric, since the probability is 0.006 for legendary and 0.051 for rare every time the box is opened. However, the fact that there is still a right peak clearly demonstrates there is a more complex mechanism. </p>
	      
	      
	   
	 <p>The number of loot boxes that were open before a 4 or 5 star prize was recieved</p>
	      
	<img src=https://lh3.googleusercontent.com/Q2JbvHBAYZ90eqTyPwupYGFnyDIc1hjvkuzME4WgaNPhwBUmibK6v4dUoZcjwdnYQGFO3ROu7wSyolPZxe6u5QuRR7aGce5zAePsUR9pIKmJcQxmlKRPped2VU8wQMbJXOsoouNKxw=w2400 
	     width="800" 
     		height="600" />
	      
	      
	
	<img src=https://lh3.googleusercontent.com/B3lDvN5-k91pKdCr7R1UguDDXdsaugkMU2x_Ex45WVHmoOuTSHMMRA8MpCzbguUpk7Xo0h5N-GF9Ae6pdM7cSup96-eE-Vr7P9cjfnBFdCCAyQDq2V7W0L27aHxVexR340tOcw-s-g=w2400 
	     width="600" 
     		height="500"
	     />      
	      
	      
	      
	     <p> In the above two plots, we attempted to compare the factors, grouping and bannerID, to the pity count through visualization methods but the differences are too subtle to be discerned with solely a visual analysis. </p>
      
	    
	</section>
      
      <section id="neural_networks">
        <h2>Neural Networks</h2>
	      
	<h1> We turned to statistical models to delve deeper into how these facts influence the pity mechanism </h1>
	      
	      <p> Although the plots above showed slight differences in the distributions when certain factors were changed, it's difficult to make substantial conclusions based on these visualizations alone. Thus, we turned to statistical models to more further explore this trend. </p>
	      <p> The first step was creating two datasets, which each take in the 5 factors supplied in the pull.csv data and output a probability distribution of the pity values at which an item can be expected. For the rare (four star) dataset, the output represents the probability a rare item will be obtained at that pity value. For the legendary (five star) dataset, the output is similar, but binned into groups of 10 to span the ful 0 to 90 possible pity values. </p>
	      <p> We first tried a simple linear regression model, which performed fairly well, predicting with 30% accuracy on the legendary dataset and 12% accuracy on the rare. This was significantly better than the base probability, but nevertheless we sought to further improve by turning to the more complex deep learning. <p>
	      
        <p>Due to the time constraint, we briefly explored some variations of architectures to optimize performance. These are some of the Neural Networks we tested.</p>
	      
	      
    	 <img src=https://lh3.googleusercontent.com/KQOfuprH9661FzGQ4V6fTI_Uj-xLMN9R_MdKK8_ZuafD40pDEpoJLQkX4EQHgog_mYYeyN6SHwa9pVMZ8-_0cGt1QB4XUmexAG4yiSCDqVuN3ZsHBNVcMZMh9tHUBbGBrxPocFotaA=w2400 /> 
	      
	      
	<img src=https://lh3.googleusercontent.com/ddkVMUK6QcUDkoW5G0U4bXuLXQEAahgbRbld1svjvj_XozWfxjJGuENVEJgp115Mh68VK_u43POC_6UuclmzZbrAF1mmBZXyeQESEAf_J7MNhcQojTc2tvsAvl8pPr-KDMys7fQ_aw=w2400 />
	
	<img src=https://lh3.googleusercontent.com/dwDt5plllTBj0dqdkHrpIq5WUcszFWMviPP2ZofGvJJUO7yKeeWdbvbajzT70SEfQWJQK8MooYw8TzSVIGVvmHUcmSYxhtbPRXVFeLV0ri5IaB9GtQmnlErwGQUA6izvTuKxpFuQGg=w2400 />
	     
	<img src=https://lh3.googleusercontent.com/pAyjlwLM99v2fhQkIr_ofFOoV1aL89yEm5IJDSo1TiWluQVwKtofUIxOSp-BeUc23Ly0gaeMdSawsSDmDW31HxRLwtvTydbiuNaQlX0DbR8-u7v9r5rL0lmaoKemc8l2rNJ57N82Tg=w2400 />
	      
	<p> After a brief hyper parameter search, we were able to achieve 47% accuracy on the legendary dataset and 36% accuracy on the rare dataset. However, this still raises the question of why can these models predict so well if the process is truly random? To answer this question, we performed a number of inteprretability analysis that aim to understand what the models learned and how they make predictions. The results of some are shown below; we identified the most important factors and examined how the model's predictions change with those factors. </p>
	      
	      <p> Legendary dataset model </p>
	 <img src=https://lh3.googleusercontent.com/w2buVpKHTZZ_sYsi4VvuVMAY-kLxhJxSPnCEOjTYp5IolunNp9AqJq5-8RX2lp2DiGxamvH8uJw3A3DABj_Oi9vbVQQHvCL4ys5yVz-zwJccnvvShhBMXDpQCiCvKkFzblmdVlaCjg=w2400 />
	      
	<p> As demonstrated by the significant drop in accuracy when banner ID was removed from the model's inputs, we identified this to be critically important in the pity system. Thus, we further explored how banner ID impacts looting probabilities in the experiment below, where we visualized predicted distributions for several different banner IDs. </p>
		
	 <img src=https://lh3.googleusercontent.com/lgreufRIlru_LVHtv6n9CO0kEXs7No72LszY7tm51yUWGDux4_N32lK4Kw_QpVE-G0y04KqH-hfcuxTbivy5xfJ_A2KSGxJ09rUTzZB7Jp5yopcz9qdFp1yLap9M0oy4KpX8v85KsA=w2400 />
	      
	      
	 <p> As illustrated above, the predicted probability distribution is shifted slightly in each banner ID, further validating that the banner ID, and thus the type of loot box, plays a role in the dispersion of rare and legendary loot; it is not solely determined by pity. </p>
	         
      </section>
      
      
      

      <section id="conclusion">
        <h2>Conclusion</h2>
        <p>Our analysis shows that there is a hidden pity system that works behind the visible pity system. Once a player reaches 10 pity points, they are far more likely to obtain a legendary item. Before then, obtaining one of these items is nearly impossible. <br/><br/>Aside from this “soft pity,” Banner ID (type of loot box) and Wish ID (player ID based on individual player factors) are the most important factors in determining probability of obtaining a rare or legendary item. Wish ID is a function that is based on hidden factors, and plays a role in determining loot box chances. Other games with a loot box profit model have given players who spend more money better chances on loot boxes. This is an example of a factor that could play into Wish ID.
</p>
      </section>
      
	<section id="members">
      <h3>Members</h3>
      <ul>
        <li>Rohan</li>
        <li>Karim &#128133</li>
        <li>Shayl</li>
        <li>Justin</li>
      </ul>
	  </section>
      
    </main>

    <footer>
      <p>Copyright &copy; 2023 Team chatGp</p>
    </footer>
  </body>
</font>
</html>
